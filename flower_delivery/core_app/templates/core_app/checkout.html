{% extends "base.html" %}

{% block content %}
<div class="container-fluid" style="background-color: #e6f7ff; min-height: 100vh; padding-top: 20px; padding-bottom: 20px;">
    <div class="container mt-5">
        <h2 class="text-center mb-4 text-primary">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>

        {% if items %}
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="bg-white p-4 shadow rounded">
                    <h3 class="text-secondary mb-4">–í–∞—à–∏ —Ç–æ–≤–∞—Ä—ã</h3>
                    <ul class="list-group mb-4">
                        {% for item in items %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>{{ item.product.name }}</strong> <br>
                                –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {{ item.quantity }} —à—Ç. <br>
                                –¶–µ–Ω–∞ –∑–∞ —à—Ç—É–∫—É: {{ item.product.price }} —Ä—É–±.
                            </div>
                            <span class="text-success"><strong>{{ item.product.price|floatformat:2 }} √ó {{ item.quantity }} = {{ item.product.price|floatformat:2|add:item.quantity|floatformat:2 }} —Ä—É–±.</strong></span>
                        </li>
                        {% endfor %}
                    </ul>

                    <div class="text-end mb-4">
                        <h5>–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞: <span class="text-success">{{ total_price }} —Ä—É–±.</span></h5>
                    </div>

                    <form method="post" class="p-3 border rounded bg-light">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="address" class="form-label"><strong>–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</strong></label>
                            <textarea id="address" name="address" class="form-control" rows="3" required placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞, –≥–æ—Ä–æ–¥"></textarea>
                        </div>
                        <div class="text-end">
                            <button type="submit" class="btn btn-primary">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        {% else %}
        <div class="alert alert-info text-center">
            <h5>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üõí</h5>
            <p>–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ <a href="{% url 'catalog' %}" class="text-decoration-underline">–∫–∞—Ç–∞–ª–æ–≥</a> –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

